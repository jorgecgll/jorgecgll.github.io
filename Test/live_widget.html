<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

  <h1>Testing A COOKIE</h1>



  <script>
    !function (a, b) { a("squatch", "https://cdn.jsdelivr.net/npm/@saasquatch/squatch-js/dist/squatch.min.js", b) }(function (a, b, c) { var d, e, f; c["_" + a] = {}, c[a] = {}, c[a].ready = function (b) { c["_" + a].ready = c["_" + a].ready || []; c["_" + a].ready.push(b); }, e = document.createElement("script"), e.async = 1, e.src = b, f = document.getElementsByTagName("script")[0], f.parentNode.insertBefore(e, f) }, this);

    window.squatch.ready(function () {

      //configure squatch.js for the tenant you are using       
      squatch.init({
        tenantAlias: 'test_a8b41jotf8a1v',
        domain: "https://staging.referralsaasquatch.com",
        debug: true
      });

      //object containing the init parameters for squatch.js
      var initObj = {
        engagementMedium: 'EMBED',
        widgetType: 'REFERRER_WIDGET',
        user: {
          id: 'frog',
          accountId: 'frog'
        },
        // no expiry
        jwt: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoiZnJvZyIsImFjY291bnRJZCI6ImZyb2cifX0.V4DVS6StGmk9CxqodHF3-ijqasU3_I1K1QFenrjSDdY",
        // seconds expiry
        // jwt:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoiZnJvZyIsImFjY291bnRJZCI6ImZyb2cifSwiZXhwIjoxNTkxNzI3NzYwfQ.NLR-FB9KY2vLmGU9NgGw7KwLLKbVxE1y8DRoYiBIYQU"
        // milliseconds expiry
        // jwt: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoiZnJvZyIsImFjY291bnRJZCI6ImZyb2cifSwiZXhwIjoxNTkxNzI3NzYwODE4fQ.IIBfm0zlTgWulVPCIkYDbbLT3-SsV8PIC75nlv3oTYw"
        // cookie: "what is it"
      };

      var element = document.getElementById("autofill")

      squatch.api().squatchReferralCookie().then(function (response) {
        console.log('res ', response);
        if(response.codes) {
          element.value = response.codes["referral-yeah"];
        }
        
      });

      squatch.widgets().upsertUser(initObj).then(function (response) {
        user = response.user;
      }).catch(function (error) {
        console.log(error);
      });
    });
  </script>

  <input id="autofill" />

  <div id="squatchembed"></div>

</body>

</html>